<div x-show="activeTrack" 
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="translate-y-full"
     x-transition:enter-end="translate-y-0"
     class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] h-20 flex items-center px-6 z-40">

    <div class="absolute -top-1.5 left-0 w-full h-3 cursor-pointer group z-50" 
         @click.stop="seekGlobal($event)">
        
        <div class="absolute bottom-0 w-full h-1 bg-gray-200 group-hover:h-1.5 transition-all duration-200"></div>
        
        <div class="absolute bottom-0 h-1 bg-orange-200 opacity-0 group-hover:opacity-100 w-full transition-all duration-200 group-hover:h-1.5"></div>

        <div class="absolute bottom-0 bg-orange-600 h-1 group-hover:h-1.5 transition-all duration-100 pointer-events-none" 
             :style="'width: ' + audio.progressPercent + '%'">
             <div class="absolute right-0 -top-1 w-3 h-3 bg-orange-600 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-1/2"></div>
        </div>
    </div>

    <div class="flex items-center gap-4 w-1/3 overflow-hidden">
        <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 shrink-0 shadow-sm relative overflow-hidden">
            <template x-if="activeSet && activeSet.image_url">
                <img :src="activeSet.image_url" class="w-full h-full object-cover">
            </template>
            <svg x-show="!activeSet || !activeSet.image_url" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        </div>
        
        <div class="min-w-0 flex-1">
            <div class="font-bold text-sm truncate text-gray-900" x-text="activeTrack ? activeTrack.title : 'No Track'"></div>
            <div class="text-xs text-gray-500 truncate" x-text="activeTrack ? activeTrack.artist : 'Select a track'"></div>
        </div>
        
        <button @click="toggleLike(activeTrack)" class="p-2 transition-colors rounded-full hover:bg-gray-100">
            <svg width="20" height="20" :class="activeTrack && activeTrack.liked ? 'text-pink-500 fill-current' : 'text-gray-400'" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
        </button>
    </div>

    <div class="flex items-center justify-center gap-6 w-1/3">
        <button @click="prevTrack()" class="text-gray-400 hover:text-orange-600 transition-colors p-2 active:scale-95 transform">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
        </button>
        
        <button @click="togglePlayPauseGlobal()" class="w-12 h-12 flex items-center justify-center bg-gray-900 text-white rounded-full hover:bg-orange-600 hover:shadow-lg hover:shadow-orange-200 transition-all duration-300 active:scale-95">
            <svg x-show="audio.paused" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" class="ml-1"><path d="M8 5v14l11-7z"/></svg>
            <svg x-show="!audio.paused" width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        
        <button @click="nextTrack()" class="text-gray-400 hover:text-orange-600 transition-colors p-2 active:scale-95 transform">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
        </button>
    </div>

    <div class="flex items-center justify-end gap-4 w-1/3">
        <div class="text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded border border-gray-200 shadow-sm min-w-[90px] text-center">
            <span x-text="formatTime(audio.currentTime)">00:00</span> / <span x-text="formatTime(audio.duration || 0)">00:00</span>
        </div>
        
        <div class="flex items-center gap-2 group w-32">
            <button @click="audio.volume = (audio.volume > 0 ? 0 : 1); $refs.player.volume = audio.volume" class="text-gray-400 hover:text-gray-600">
                <svg x-show="audio.volume > 0.5" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                <svg x-show="audio.volume > 0 && audio.volume <= 0.5" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
                <svg x-show="audio.volume == 0" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7.03-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
            </button>
            <input type="range" min="0" max="1" step="0.05" 
                   x-model="audio.volume" 
                   @input="updateVolume" 
                   class="w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-orange-600 hover:h-2 transition-all">
        </div>
    </div>
</div>