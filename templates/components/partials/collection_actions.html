<div class="flex flex-wrap gap-2 justify-end collection-actions"
     :class="compact ? 'text-[11px]' : 'text-xs'">
    <button @click="togglePurchase(track)"
            class="font-bold uppercase tracking-wide rounded-lg border transition-colors"
            :class="[
                compact ? 'px-2.5 py-1' : 'px-3 py-1.5',
                track.purchased ? 'bg-emerald-50 text-emerald-700 border-emerald-200' : 'bg-white text-gray-600 border-gray-200 hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700'
            ]">
        <span x-text="context === 'purchased' ? 'Entfernen' : (track.purchased ? 'Gekauft' : 'Als gekauft markieren')"></span>
    </button>

    <button x-show="track.producer_id"
            @click="toggleProducerFavorite(track)"
            class="font-bold uppercase tracking-wide rounded-lg border transition-colors flex items-center gap-1"
            :class="[
                compact ? 'px-2.5 py-1' : 'px-3 py-1.5',
                isProducerFavorite(track.producer_id) ? 'bg-blue-50 text-blue-700 border-blue-200' : 'bg-white text-gray-600 border-gray-200 hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700'
            ]">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2a5 5 0 015 5v1a5 5 0 11-10 0V7a5 5 0 015-5zm-6 18a6 6 0 0112 0v1H6v-1z"/></svg>
        <span x-text="isProducerFavorite(track.producer_id) ? 'Producer gespeichert' : 'Producer merken'"></span>
    </button>

    <div class="relative"
         x-data="{ searchOpen: false }"
         :class="compact ? 'w-full flex justify-end' : ''">
        <button @click="searchOpen = !searchOpen"
                class="font-bold uppercase tracking-wide rounded-lg border transition-colors flex items-center gap-2"
                :class="compact ? 'px-2.5 py-1 text-[10px] bg-white text-gray-600 border-gray-200 hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700' : 'px-3 py-1.5 text-xs bg-white text-gray-600 border-gray-200 hover:bg-orange-50 hover:border-orange-200 hover:text-orange-700'">
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" /></svg>
            <span>Search</span>
        </button>

        <div x-show="searchOpen"
             x-transition
             @click.outside="searchOpen = false"
             class="absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden z-30">
            <a :href="track.beatport_url || getSearchLink(track, 'beatport')" target="_blank"
               class="block px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-orange-50 hover:text-orange-800 transition-colors">
                Beatport
            </a>
            <a :href="getSearchLink(track, 'bandcamp')" target="_blank"
               class="block px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-orange-50 hover:text-orange-800 transition-colors">
                Bandcamp
            </a>
        </div>
    </div>
</div>
